(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/articleDetail/articleDetail"],{3088:function(t,e,n){},"3a69":function(t,e,n){"use strict";n.r(e);var r=n("76a5"),a=n("bca5");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("8044");var u=n("f0c5"),o=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);e["default"]=o.exports},"76a5":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={uParse:function(){return Promise.all([n.e("common/vendor"),n.e("components/u-parse/u-parse")]).then(n.bind(null,"2dd8"))},CommentBox:function(){return n.e("components/CommentBox/CommentBox").then(n.bind(null,"357d"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"2f51"))},SaveLikes:function(){return n.e("components/SaveLikes/SaveLikes").then(n.bind(null,"1cc6"))},CommentMasker:function(){return n.e("components/CommentMasker/CommentMasker").then(n.bind(null,"bb9f"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.commitList.length);t._isMounted||(t.e0=function(e){t.showPopup=e}),t.$mp.data=Object.assign({},{$root:{g0:n}})},i=[]},8044:function(t,e,n){"use strict";var r=n("3088"),a=n.n(r);a.a},"8b84":function(t,e,n){"use strict";(function(t){var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("2eee")),i=r(n("448a")),u=r(n("9523")),o=r(n("c973")),c=n("e40d");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,u.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={components:{uParse:function(){Promise.all([n.e("common/vendor"),n.e("components/u-parse/u-parse")]).then(function(){return resolve(n("2dd8"))}.bind(null,n)).catch(n.oe)}},name:"ArticleDetail",onLoad:function(){this.articleData=this.$Router.currentRoute.query,this._getArticleDetail(),this._getCommentList()},data:function(){return{articleData:null,showPopup:!1,commentVal:"",commitList:[],replyData:{}}},methods:{openMaskerComment:function(){var t=this;return(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkedIsLogin();case 2:t.showPopup=!0;case 3:case"end":return e.stop()}}),e)})))()},_getArticleDetail:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get_article_detail({article_id:t.articleData._id});case 2:n=e.sent,t.articleData=n;case 4:case"end":return e.stop()}}),e)})))()},_sendCommentData:function(e){var n=this;return(0,o.default)(a.default.mark((function r(){var i;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$http.add_comment(l({userId:n.userInfo._id,articleId:n.articleData._id,content:e},n.replyData));case 2:i=r.sent,t.showToast({title:i.msg,mask:!0}),n.showPopup=!1,n.replyData={},n._getCommentList();case 7:case"end":return r.stop()}}),r)})))()},_getCommentList:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get_comment_list({articleId:t.articleData._id});case 2:n=e.sent,t.commitList=n;case 4:case"end":return e.stop()}}),e)})))()},commentReply:function(t){this.replyData={comment_id:t.comment.comment_id,is_reply:t.isReply},t.comment.reply_id&&(this.replyData.reply_id=t.comment.reply_id),this.openMaskerComment()},_followAuthor:function(){var e=this;return(0,o.default)(a.default.mark((function n(){var r,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.checkedIsLogin();case 2:return n.next=4,e.$http.update_follow_author({authorId:e.articleData.author.id,userId:e.userInfo._id});case 4:r=n.sent,t.showToast({title:r.msg}),u=(0,i.default)(e.userInfo.author_likes_ids),u.includes(e.articleData.author.id)?u=u.filter((function(t){return t!==e.articleData.author.id})):u.push(e.articleData.author.id),e.updateUserInfo(l(l({},e.userInfo),{},{author_likes_ids:u})),t.$emit("updateAuthor");case 10:case"end":return n.stop()}}),n)})))()},_updateCompliments:function(){var e=this;return(0,o.default)(a.default.mark((function n(){var r,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.checkedIsLogin();case 2:return n.next=4,e.$http.update_compliments({articleId:e.articleData._id,userId:e.userInfo._id});case 4:r=n.sent,t.showToast({title:r.msg}),u=(0,i.default)(e.userInfo.thumbs_up_article_ids),u.includes(e.articleData._id)?(u=u.filter((function(t){return t!==e.articleData._id})),e.articleData.thumbs_up_count--):(u.push(e.articleData._id),e.articleData.thumbs_up_count++),e.updateUserInfo(l(l({},e.userInfo),{},{thumbs_up_article_ids:u}));case 9:case"end":return n.stop()}}),n)})))()},goCommentPage:function(){t.navigateTo({url:"/pages/commentList/commentList?articleId=".concat(this.articleData._id)})}},computed:{content:function(){try{return(0,c.marked)(this.articleData.content)}catch(t){return" "}},isFollowAuthor:function(){try{return this.userInfo&&this.userInfo.author_likes_ids.includes(this.articleData.author.id)}catch(t){return!1}},isCompliments:function(){try{return this.userInfo&&this.userInfo.thumbs_up_article_ids.includes(this.articleData._id)}catch(t){return!1}}}};e.default=d}).call(this,n("543d")["default"])},bca5:function(t,e,n){"use strict";n.r(e);var r=n("8b84"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},f189:function(t,e,n){"use strict";(function(t,e){var r=n("4ea4");n("0d76"),n("a9ff");r(n("66fd"));var a=r(n("3a69"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["f189","common/runtime","common/vendor"]]]);